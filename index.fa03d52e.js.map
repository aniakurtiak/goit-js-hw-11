{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,S,aAIA,MAAMC,EAAOC,SAASC,cAAc,gBAC9BC,EAAUF,SAASC,cAAc,YACjCE,EAAcH,SAASC,cAAc,cAE3C,IAAIG,EAAc,EACdC,EAAqB,GAuDzB,SAASC,EAAaC,GAClB,OAAOA,EAAIC,KAAI,EAACC,aAACA,EAAYC,cAAEA,EAAaC,KAAEA,EAAIC,MAAEA,EAAKC,MAAEA,EAAKC,SAAEA,EAAQC,UAAEA,KAAe,+CAEjFN,WAAsBE,yFAGnBC,8DAGAC,iEAGGC,iEAGAC,sCAGXC,KAAK,G,CAvEdjB,EAAKkB,iBAAiB,UAGtBC,eAA6BC,GACzBA,EAAIC,iBACJ,MAAMC,YAAEA,GAAgBF,EAAIG,cAAcC,SACrClB,IAAuBgB,EAAYG,QACxCnB,EAAqBgB,EAAYG,MACjCtB,EAAQuB,UAAY,GACpBrB,EAAc,GAEd,IACA,MAAMsB,QAAa,EAAAC,EAAAC,kBAAiBvB,EAAoBD,GACpDsB,EAAKG,UAAY,GACnB3B,EAAQuB,WAAanB,EAAaoB,EAAKI,MACvC1B,IACIsB,EAAKG,UAA0B,GAAdzB,EACnBD,EAAY4B,MAAMC,QAAU,SAE5B7B,EAAY4B,MAAMC,QAAU,OAC5BnC,EAAAoC,OAAOC,QAAQ,gEAGjBrC,EAAAoC,OAAOC,QAAQ,2E,CAEjB,MAAOC,GACPC,QAAQC,IAAI,yBAA0BF,GACtCtC,EAAAoC,OAAOC,QAAQ,mE,KA1BnB/B,EAAYc,iBAAiB,SA8B7BC,iBACEf,EAAY4B,MAAMC,QAAU,OAC5B,IACE,MAAMN,QAAa,EAAAC,EAAAC,kBAAiBvB,EAAoBD,GACpDsB,EAAKG,UAAY,GACnB3B,EAAQuB,WAAanB,EAAaoB,EAAKI,MACvC1B,IACIsB,EAAKG,UAA0B,GAAdzB,EACnBD,EAAY4B,MAAMC,QAAU,SAE5B7B,EAAY4B,MAAMC,QAAU,OAC5BnC,EAAAoC,OAAOC,QAAQ,gEAGjBrC,EAAAoC,OAAOC,QAAQ,6D,CAEjB,MAAOC,GACPC,QAAQC,IAAI,4BAA6BF,GACzCtC,EAAAoC,OAAOC,QAAQ,mE","sources":["src/script.js"],"sourcesContent":["import { Notify } from 'notiflix/build/notiflix-notify-aio';\nimport { serviceSearchImg } from \"./pixabay-api\";\n\n\nconst form = document.querySelector('.search-form');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nlet currentPage = 1;\nlet currentSearchQuery = '';\n\nform.addEventListener('submit', handlerSearch);\nloadMoreBtn.addEventListener('click', handleLoadMore);\n\nasync function handlerSearch(evt) {\n    evt.preventDefault()\n    const { searchQuery } = evt.currentTarget.elements;\n     if (currentSearchQuery !== searchQuery.value) {\n    currentSearchQuery = searchQuery.value;\n    gallery.innerHTML = '';\n    currentPage = 1;\n  }\n    try {\n    const data = await serviceSearchImg(currentSearchQuery, currentPage);\n    if (data.totalHits > 0) {\n      gallery.innerHTML += createMarkup(data.hits);\n      currentPage++;\n      if (data.totalHits > currentPage * 40) {\n        loadMoreBtn.style.display = 'block';\n      } else {\n        loadMoreBtn.style.display = 'none';\n        Notify.failure(\"We're sorry, but you've reached the end of search results.\");\n      }\n    } else {\n      Notify.failure('Sorry, there are no images matching your search query. Please try again.');\n    }\n  } catch (error) {\n    console.log(\"Error handling search:\", error);\n    Notify.failure('Sorry, there was an error handling the search. Please try again.');\n  }\n}\n\nasync function handleLoadMore() {\n  loadMoreBtn.style.display = 'none';\n  try {\n    const data = await serviceSearchImg(currentSearchQuery, currentPage);\n    if (data.totalHits > 0) {\n      gallery.innerHTML += createMarkup(data.hits);\n      currentPage++;\n      if (data.totalHits > currentPage * 40) {\n        loadMoreBtn.style.display = 'block';\n      } else {\n        loadMoreBtn.style.display = 'none';\n        Notify.failure(\"We're sorry, but you've reached the end of search results.\");\n      }\n    } else {\n      Notify.failure(\"We're sorry, but you've reached the end of search results.\");\n    }\n  } catch (error) {\n    console.log(\"Error handling load more:\", error);\n    Notify.failure('Sorry, there was an error loading more images. Please try again.');\n  }\n}\n\nfunction createMarkup(arr) {\n    return arr.map(({webformatURL, largeImageURL, tags, likes, views, comments, downloads}) => `\n    <div class=\"photo-card\">\n  <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n  <div class=\"info\">\n    <p class=\"info-item\">\n      <b>Likes ${likes}</b>\n    </p>\n    <p class=\"info-item\">\n      <b>Views ${views}</b>\n    </p>\n    <p class=\"info-item\">\n      <b>Comments ${comments}</b>\n    </p>\n    <p class=\"info-item\">\n      <b>Downloads${downloads}</b>\n    </p>\n  </div>\n</div>`).join('')\n}\n"],"names":["$iQIUW","parcelRequire","$2aac3885343dc6b2$var$form","document","querySelector","$2aac3885343dc6b2$var$gallery","$2aac3885343dc6b2$var$loadMoreBtn","$2aac3885343dc6b2$var$currentPage","$2aac3885343dc6b2$var$currentSearchQuery","$2aac3885343dc6b2$var$createMarkup","arr","map","webformatURL","largeImageURL","tags","likes","views","comments","downloads","join","addEventListener","async","evt","preventDefault","searchQuery","currentTarget","elements","value","innerHTML","data","$cmXxj","serviceSearchImg","totalHits","hits","style","display","Notify","failure","error","console","log"],"version":3,"file":"index.fa03d52e.js.map"}