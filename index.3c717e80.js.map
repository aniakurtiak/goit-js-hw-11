{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,uCAGMC,EAAOC,SAASC,cAAc,gBAC9BC,EAAUF,SAASC,cAAc,YACjCE,EAAcH,SAASC,cAAc,cAEvCG,EAAc,EACdC,EAAqB,G,SAKVC,I,OAAAA,EAAfC,EAAAV,EAAA,CAAAU,EAAAC,GAAAC,MAAA,SAAAC,EAA6BC,G,IAEjBC,EAOFC,E,yEARNF,EAAIG,iBACEF,EAAkBD,EAAII,cAAcC,SAAlCJ,YACHP,IAAuBO,EAAYK,QACxCZ,EAAqBO,EAAYK,MACjCf,EAAQgB,UAAY,GACpBd,EAAc,G,mBAGK,EAAAe,EAAAC,kBAAiBf,EAAoBD,G,QAAlDS,EAAIQ,EAAAC,MACDC,UAAY,GACnBrB,EAAQgB,WAAaM,EAAaX,EAAKY,MACvCrB,IACIS,EAAKU,UAA0B,GAAdnB,EACnBD,EAAYuB,MAAMC,QAAU,SAE5BxB,EAAYuB,MAAMC,QAAU,OAC5BC,EAAAC,OAAOC,QAAQ,gEAGjBF,EAAAC,OAAOC,QAAQ,4E,kDAGjBC,QAAQC,IAAI,yBAAwBX,EAAAY,IACpCL,EAAAC,OAAOC,QAAQ,oE,2DAxBSI,MAAAC,KAAAC,U,UA4BbC,I,OAAAA,EAAf9B,EAAAV,EAAA,CAAAU,EAAAC,GAAAC,MAAA,SAAAC,I,IAGUG,E,yEAFRV,EAAYuB,MAAMC,QAAU,O,mBAEP,EAAAR,EAAAC,kBAAiBf,EAAoBD,G,QAAlDS,EAAIQ,EAAAC,MACDC,UAAY,GACnBrB,EAAQgB,WAAaM,EAAaX,EAAKY,MACvCrB,IACIS,EAAKU,UAA0B,GAAdnB,EACnBD,EAAYuB,MAAMC,QAAU,SAE5BxB,EAAYuB,MAAMC,QAAU,OAC5BC,EAAAC,OAAOC,QAAQ,gEAGjBF,EAAAC,OAAOC,QAAQ,8D,gDAGjBC,QAAQC,IAAI,4BAA2BX,EAAAY,IACvCL,EAAAC,OAAOC,QAAQ,oE,0DAlBUI,MAAAC,KAAAC,U,CAsB7B,SAASZ,EAAac,GAClB,OAAOA,EAAIC,KAAI,SAAAC,G,IAAEC,EAAYD,EAAZC,aAA6BC,GAAFF,EAAbG,cAAmBH,EAAJE,MAAME,EAAKJ,EAALI,MAAOC,EAAKL,EAALK,MAAOC,EAAQN,EAARM,SAAUC,EAASP,EAATO,U,MAAe,+CAE3DC,OAAtBP,EAAa,WAGVO,OAHmBN,EAAK,yFAMxBM,OAHAJ,EAAM,8DAMHI,OAHHH,EAAM,iEAMHG,OAHAF,EAAS,iEAGCE,OAAVD,EAAU,mC,IAGrBE,KAAK,G,CAvEdlD,EAAKmD,iBAAiB,U,SAGOvC,G,OAAdL,EAAa4B,MAAAC,KAAAC,U,IAF5BjC,EAAY+C,iBAAiB,S,kBA8Bdb,EAAcH,MAAAC,KAAAC,U","sources":["src/script.js"],"sourcesContent":["import { Notify } from 'notiflix/build/notiflix-notify-aio';\nimport { serviceSearchImg } from \"./pixabay-api\";\n\nconst form = document.querySelector('.search-form');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nlet currentPage = 1;\nlet currentSearchQuery = '';\n\nform.addEventListener('submit', handlerSearch);\nloadMoreBtn.addEventListener('click', handleLoadMore);\n\nasync function handlerSearch(evt) {\n    evt.preventDefault()\n    const { searchQuery } = evt.currentTarget.elements;\n     if (currentSearchQuery !== searchQuery.value) {\n    currentSearchQuery = searchQuery.value;\n    gallery.innerHTML = '';\n    currentPage = 1;\n  }\n    try {\n    const data = await serviceSearchImg(currentSearchQuery, currentPage);\n    if (data.totalHits > 0) {\n      gallery.innerHTML += createMarkup(data.hits);\n      currentPage++;\n      if (data.totalHits > currentPage * 40) {\n        loadMoreBtn.style.display = 'block';\n      } else {\n        loadMoreBtn.style.display = 'none';\n        Notify.failure(\"We're sorry, but you've reached the end of search results.\");\n      }\n    } else {\n      Notify.failure('Sorry, there are no images matching your search query. Please try again.');\n    }\n  } catch (error) {\n    console.log(\"Error handling search:\", error);\n    Notify.failure('Sorry, there was an error handling the search. Please try again.');\n  }\n}\n\nasync function handleLoadMore() {\n  loadMoreBtn.style.display = 'none';\n  try {\n    const data = await serviceSearchImg(currentSearchQuery, currentPage);\n    if (data.totalHits > 0) {\n      gallery.innerHTML += createMarkup(data.hits);\n      currentPage++;\n      if (data.totalHits > currentPage * 40) {\n        loadMoreBtn.style.display = 'block';\n      } else {\n        loadMoreBtn.style.display = 'none';\n        Notify.failure(\"We're sorry, but you've reached the end of search results.\");\n      }\n    } else {\n      Notify.failure(\"We're sorry, but you've reached the end of search results.\");\n    }\n  } catch (error) {\n    console.log(\"Error handling load more:\", error);\n    Notify.failure('Sorry, there was an error loading more images. Please try again.');\n  }\n}\n\nfunction createMarkup(arr) {\n    return arr.map(({webformatURL, largeImageURL, tags, likes, views, comments, downloads}) => `\n    <div class=\"photo-card\">\n  <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n  <div class=\"info\">\n    <p class=\"info-item\">\n      <b>Likes ${likes}</b>\n    </p>\n    <p class=\"info-item\">\n      <b>Views ${views}</b>\n    </p>\n    <p class=\"info-item\">\n      <b>Comments ${comments}</b>\n    </p>\n    <p class=\"info-item\">\n      <b>Downloads${downloads}</b>\n    </p>\n  </div>\n</div>`).join('')\n}\n"],"names":["$bpxeT","parcelRequire","$81cdcb03b6ee87e9$var$form","document","querySelector","$81cdcb03b6ee87e9$var$gallery","$81cdcb03b6ee87e9$var$loadMoreBtn","$81cdcb03b6ee87e9$var$currentPage","$81cdcb03b6ee87e9$var$currentSearchQuery","$81cdcb03b6ee87e9$var$_handlerSearch","$parcel$interopDefault","$2TvXO","mark","_callee","evt","searchQuery","data","preventDefault","currentTarget","elements","value","innerHTML","$ggAWC","serviceSearchImg","_ctx","sent","totalHits","$81cdcb03b6ee87e9$var$createMarkup","hits","style","display","$h6c0i","Notify","failure","console","log","t0","apply","this","arguments","$81cdcb03b6ee87e9$var$_handleLoadMore","arr","map","param","webformatURL","tags","largeImageURL","likes","views","comments","downloads","concat","join","addEventListener"],"version":3,"file":"index.3c717e80.js.map"}